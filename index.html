<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CRANE CULT</title>

    <!-- Keep your existing global styling (scanlines/cursors/etc.) -->
    <link rel="stylesheet" href="index.css" />

    <style>
        /* If JS is disabled, show home page normally */
        html, body {
            height: 100%;
            margin: 0;
            background: #000;
        }

        /* This container only gets used on wide screens */
        #layout {
            height: 100vh;
            width: 100vw;
            display: grid;
            grid-template-columns: 320px 1fr;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: 0;
            display: block;
        }
    </style>

    <script>
        // Show the sidebar only on screens that can realistically handle it.
        // iPad portrait is 768px wide in CSS pixels, and "phone landscape" tends to be short,
        // so we also require a decent height.
        const CAN_SHOW_SIDEBAR = window.matchMedia('(min-width: 768px) and (min-height: 700px)').matches;

        if (!CAN_SHOW_SIDEBAR) {
            // Small screens (phones): don't load the sidebar at all.
            // The index page becomes the home page.
            window.location.replace('home.htm');
        }
    </script>
</head>

<body>
    <!-- Fallback for no-JS users: show home only -->
    <noscript>
        <iframe src="home.htm" title="Home"></iframe>
    </noscript>

    <div id="layout" hidden>
        <iframe id="sidebar"
                name="contents"
                src="sidebar.htm"
                title="Sidebar"
                scrolling="auto"></iframe>

        <iframe id="main"
                name="main"
                src="home.htm"
                title="Main"
                scrolling="auto"></iframe>
    </div>

    <script>
        // If we didn't redirect, we are on a wide-enough device: enable the two-column layout.
        if (typeof CAN_SHOW_SIDEBAR !== 'undefined' && CAN_SHOW_SIDEBAR) {
            document.getElementById('layout').hidden = false;
        }
    </script>

    <!-- Optional: keep your flood effect on the index page -->
    <link href="https://melonking.net/styles/flood.css" rel="stylesheet" type="text/css" media="all" />
    <script src="https://melonking.net/scripts/flood.js"></script>
</body>
</html>
